!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("fs")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(3)),o=u(r(4));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,r){var u=n.default.createServer(o.default),a=process.env.PORT||7080;(0,o.default)(e,t,r);u.listen(a,function(e){e&&console.log(e),console.log("Started and listening on http://localhost:"+a)})}},function(e,t){e.exports=require("http")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(r(0)),o=m(r(5)),u=r(6),a=r(7),i=r(8),s=r(9),l=m(r(10)),c=m(r(11)),f=m(r(1)),d=m(r(12)),p=m(r(13)),v=m(r(14)),S=m(r(15)),y=r(16),g=m(r(17));function m(e){return e&&e.__esModule?e:{default:e}}function _(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(o,u){try{var a=t[o](u),i=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}("next")})}}var h="",x=[],b=n.default.createElement("html",null),M=S.default.config();if(M.error)throw M.error;var T,O,j=(0,g.default)(),P=process.env.SIMORGH_PUBLIC_DIR,q=function(e,t,r){return x=e,h=t,b=r,(0,o.default)()};q.disable("x-powered-by").use((0,l.default)()).use((0,p.default)({frameguard:{action:"deny"}})).use((0,c.default)(P,{enableBrotli:!0,orderPreference:["br"]})).use((0,v.default)()).get(h,(O=_(regeneratorRuntime.mark(function e(t,r){var n,o,u,a=t.params;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.service,o=a.id,u=d.default.join("data/prod",n,o+".json"),f.default.readFile(u,function(e,t){if(e)return r.sendStatus(404),console.log(e),null;var n=JSON.parse(t);return r.setHeader("Content-Type","application/json"),r.json(n),null});case 3:case"end":return e.stop()}},e,void 0)})),function(e,t){return O.apply(this,arguments)})).get("/status",function(e,t){t.sendStatus(200)}).get("/*",(T=_(regeneratorRuntime.mark(function e(t,r){var o,l,c,f,d,p,v=t.url;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=new i.ServerStyleSheet,e.next=4,(0,u.loadInitialData)(v,x);case 4:l=e.sent,c=(0,a.renderToString)(o.collectStyles(n.default.createElement(u.ServerApp,{location:v,routes:x,data:l,context:{}}))),f=s.Helmet.renderStatic(),d=(0,a.renderToStaticMarkup)(n.default.createElement(b,{assets:j,app:c,data:l,styleTags:(0,y.getStyleTag)(o,l.isAmp),helmet:f})),r.send("<!doctype html>"+d),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),p=e.t0.message,r.status(404).send(p);case 15:case"end":return e.stop()}},e,void 0,[[0,11]])})),function(e,t){return T.apply(this,arguments)})),t.default=q},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("react-universal-app")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("styled-components")},function(e,t){e.exports=require("react-helmet")},function(e,t){e.exports=require("compression")},function(e,t){e.exports=require("express-static-gzip")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("helmet")},function(e,t){e.exports=require("gnu-terry-pratchett")},function(e,t){e.exports=require("dotenv")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStyleTag=void 0;var n,o=r(0),u=(n=o)&&n.__esModule?n:{default:n};var a=t.getStyleTag=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.getStyleElement();if(!t)return r;var n=r.reduce(function(e,t){return t&&t.props?""+e+t.props.dangerouslySetInnerHTML.__html:e},"");return u.default.createElement("style",{"amp-custom":"",dangerouslySetInnerHTML:{__html:n}})};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(1),u=(n=o)&&n.__esModule?n:{default:n};t.default=function(){var e=[];try{for(var t=JSON.parse(u.default.readFileSync(process.env.SIMORGH_ASSETS_MANIFEST_PATH)),r=Object.keys(t),n=r.length-1;n>=0;n-=1){var o=r[n];o.length>0&&e.push(t[o].js)}}catch(e){console.log("Error parsing assets manifest. SIMORGH_ASSETS_MANIFEST_PATH = "+process.env.SIMORGH_ASSETS_MANIFEST_PATH)}return e}}]);